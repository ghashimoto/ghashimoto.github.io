<html>

<head>
    <meta charset="utf-8" />
    <script language="javascript" type="text/javascript">
        // 任意のサイトに遷移させる関数
        function loadStorePage() {
            // URLを取得
            var url = new URL(window.location.href);
            // パラメータから遷移先のURLを取得
            var params = url.searchParams;
            var nextUrl = new URL(params.get('next'));
            // UAを取得
            var ua = navigator.userAgent;
            if (ua.match(/iPhone|iPad|iPod|Android/)) {
                // AndroidまたはiOS
                // アプリがインストール済みならUniversal Linksまたはintentでアプリが起動されるためこのHTMLは読み込まれない
                nextUrl.searchParams.append('referer','mail-sp');
                document.location = nextUrl;

            } else {
                // AndroidでもiOSでもない場合（Webブラウザを想定）は任意のサイトへ遷移させる
                nextUrl.searchParams.append('referer','mail-pc');
                document.location = nextUrl;
            }
        }
        window.onload = function() {
            // HTML読み込み時に自動で実行
            loadStorePage();
        }
    </script>
</head>

<body>
    <p>
        <h1>ページが表示されない場合は<a href="javascript:loadStorePage();">こちら</a>をタップ</h1>
    </p>
</body>

</html>
